<div class="overlay"></div>
<div class="ShowPopup" [class.show]="showFirstPopup">
  <app-top-pop [NamePopup]="'Create Quiz'" NameIcon="fa-solid fa-file-circle-plus" bgColor="#24C12B33"
    ColorIcon="#24C12B99" (isVisibleChange)="closePopup()"></app-top-pop>
  <div class="content p-2">
    <div class="courseSelect">
      <app-text-header [title]="'Course'" [bgColor]="'#ec8950'"></app-text-header>

      <div *ngIf="!selectedCourse" class="selectcard mt-3 my-2" (click)="toggleDropdownCourse()">
        <div class="icon">
          <i class="fas fa-book"></i>
        </div>
        <div class="text">
          <p>Click to Add Course</p>
        </div>
      </div>

      <div *ngIf="selectedCourse" class="mt-3">
        <div class="course-card px-2 py-1 position-relative">
          <div class="d-flex align-items-center gap-1">
            <div class="images">
              <img class="rounded-circle" [src]="baseUrl + selectedCourse.photoUrl" height="30" width="30" />
            </div>
            <div class="course-info">
              <h5 class="mb-1 fw-bold">
                {{ selectedCourse.name | splicText : 15 }}
              </h5>
              <p class="date mb-0">
                <i class="fas fa-clock"></i>
                {{ selectedCourse.createdOn | date }}
              </p>
            </div>
          </div>

          <div class="course-details text-end d-flex flex-column align-items-end justify-content-end">
            <p class="price">
              {{ selectedCourse.price }}
              <i class="fas fa-dollar-sign text-success"></i>
            </p>
            <p class="students">
              {{ selectedCourse.enrollmentCount }}
              <i class="fas fa-graduation-cap text-primary"></i>
            </p>
          </div>

          <button class="closeBtn position-absolute" (click)="removeCourse()">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
      </div>
      <div *ngIf="showDropdownCourse" class="dropdown bg-white border rounded p-2 mt-2">
        <div *ngFor="let lead of paginationCoursesResponse.result"
          class="lead-item d-flex justify-content-between align-items-center p-2 border-bottom cursor-pointer"
          (click)="selectCourse(lead)">
          <div class="info_course d-flex gap-2 align-items-center">
            <img class="img-fluid rounded-circle" [src]="baseUrl + lead.photoUrl" width="30" height="30" />
            <div class="info">
              <h5 class="name">{{ lead.name | splicText : 13 }}</h5>
              <p class="price">{{ lead.price }}</p>
            </div>
          </div>
          <div class="deals-btn">With Deals</div>
        </div>
      </div>
    </div>

    <div class="courseSelect mt-2">
      <app-text-header [title]="' Lessons'"></app-text-header>

      <div class="selectcard mt-3 my-2">
        <div class="icon">
          <i class="fas fa-book"></i>
        </div>
        <div class="text">
          <p>Click to Add Lessons</p>
        </div>
      </div>
      <!-- 
        <div *ngIf="selectedCourse" class="mt-3">
          <div class="course-card px-2 py-1 position-relative">
            <div class="d-flex align-items-center gap-1">
              <div class="images">
                <img class=" rounded-circle" [src]="baseUrl + selectedCourse.photoUrl" height="30" width="30">

              </div>
              <div class="course-info">
                <h5 class="mb-1 fw-bold">{{selectedCourse.name |splicText:15}}</h5>
                <p class="date mb-0"><i class="fas fa-clock"></i> {{selectedCourse.createdOn | date}}</p>
              </div>
            </div>

            <div class="course-details text-end d-flex flex-column align-items-end justify-content-end">
              <p class="price"> {{selectedCourse.price}} <i class="fas fa-dollar-sign text-success"></i></p>
              <p class="students">{{selectedCourse.enrollmentCount}} <i class="fas fa-graduation-cap text-primary"></i>
              </p>
            </div>

            <button class="closeBtn position-absolute" (click)="removeCourse()"><i
                class="fa-solid fa-xmark"></i></button>
          </div>
        </div>
        <div *ngIf="showDropdownCourse" class="dropdown bg-white border rounded p-2 mt-2">
          <div *ngFor="let lead of paginationCoursesResponse.result"
            class="lead-item d-flex justify-content-between align-items-center p-2 border-bottom cursor-pointer"
            (click)="selectCourse(lead)">
            <div class="info_course d-flex gap-2 align-items-center">
              <img class="img-fluid rounded-circle" [src]="baseUrl + lead.photoUrl" width="30" height="30">
              <div class="info">
                <h5 class="name">{{ lead.name | splicText :13 }}</h5>
                <p class="price">{{ lead.price }}</p>
              </div>
            </div>
            <div class="deals-btn">With Deals</div>
          </div>
        </div> -->
    </div>
    <div class="courseSelect mt-2">
      <app-text-header [title]="'Discount'" [bgColor]="'#ff6584ab'">
      </app-text-header>
      <div class="checkDicound d-flex gap-2 align-items-center mt-3 justify-content-between">
        <div class="seletDiscound">
          <p-select [options]="discountTypes" optionLabel="label" optionValue="value"
            [(ngModel)]="selectedDiscountType">
          </p-select>
        </div>
        <div class="valuDiscound">
          <input type="number" class="input_Couser" placeholder="Enter Time Value">
          <span class="price">
            {{ selectedDiscountType === 1 ? 'h' : 'm' }} </span>
        </div>
      </div>


    </div>

    <div class="mainSelet courseSelect  mt-2">
      <app-text-header [title]="'Main quiz information'" [bgColor]="'#6662FF'"> </app-text-header>
      <div class="mainContent mt-3">
        <div class="codeCoupon d-flex gap-2 align-items-end mb-2">
          <div class="Course_name flex-grow-1">
            <label for="Course_name">Quiz name</label>
            <input type="text" id="Course_name" placeholder="Enter Quiz name" class="input_Couser ">
          </div>
          <div class="deal-desc-btn" tooltipPosition="top">
            <i class="fa-kit fa-subtitles"></i>
          </div>
        </div>
        <div class="desCourse_name Course_name mt-2  active">
          <label for="Course_description">Description</label>
          <textarea class="input_Couser textarea_course" id="Course_description"></textarea>
        </div>






      </div>

    </div>




  </div>
  <div class="footerCourse bg-white rounded-1">
    <div class="btnsCourse">
      <button (click)="nextPopup()">
        <span>Next</span>
      </button>
    </div>
  </div>
</div>

<div class="ShowPopupTwo" [class.show]="!showSecondPopup">

  <app-top-pop [NamePopup]="'Form question '" NameIcon="fa-solid fa-text-slash" bgColor="#24C12B33"
    ColorIcon="#24C12B99" (isVisibleChange)="closePopup()"></app-top-pop>

  <div class="contentExam p-2">
    <div class="headerExam">
      <div class="leftExam">
        <div class="examCreate">
          <app-text-header [title]="'Quiz'" [bgColor]="'#6625259C'"> </app-text-header>
          <div class="contentExam mt-2">
            <div class="leftContent">
              <div class="Icon">
                <i class="fa-solid fa-file-invoice"></i>
              </div>

            </div>
            <div class="rightContent">
              <div class="Info">
                <h5>Quiz one</h5>
                <p class="date mb-0">
                  <i class="fas fa-clock"></i>
                  20/5/2028
                </p>
              </div>
            </div>


          </div>

        </div>

      </div>
      <div class="rigntExam">
        <div class="CourseCreate">
          <app-text-header [title]="'Courses '" [bgColor]="'#6625259C'"> </app-text-header>
          <div class="course-card mt-2">
            <div class="d-flex align-items-center gap-1">
              <div class="images">
                <img class="rounded-circle"
                  [src]="baseUrl +'instructor/42/photo/.jpg/e664f88c-7466-4ae5-a984-69d2eb7a54f7.jpg'" height="30"
                  width="30" />
              </div>
              <div class="course-info">
                <h5 class="mb-1 fw-bold">
                  C# Topic Rev
                </h5>
                <p class="date mb-0">
                  <i class="fas fa-clock"></i>
                  20/5/2028
                </p>
              </div>
            </div>

            <div class="course-details text-end d-flex flex-column align-items-end justify-content-end">
              <p class="price">
                1555
                <i class="fas fa-dollar-sign text-success"></i>
              </p>
              <p class="students">
                1555
                <i class="fas fa-graduation-cap text-primary"></i>
              </p>
            </div>


          </div>
        </div>

      </div>
    </div>
    <div class="HeaderQuiz mt-2 p-2">
      <div class="HeaderQuiz mt-2 p-2 justify-content-between align-items-center w-100">
        <div class="tabs d-flex gap-3 align-content-center">
          <button class="btnTab" (click)="changeValue(0)" [class.btnActive]="value == 0">
            <i class="fas fa-check-circle me-1"></i>
            True and false
            <span class="badge bg-secondary ms-1" *ngIf="trueFalseQuestions.length > 0">{{trueFalseQuestions.length}}</span>
          </button>
          <button class="btnTab" (click)="changeValue(1)" [class.btnActive]="value == 1">
            <i class="fas fa-edit me-1"></i>
            Short answer
            <span class="badge bg-secondary ms-1" *ngIf="shortAnswerQuestions.length > 0">{{shortAnswerQuestions.length}}</span>
          </button>
          <button class="btnTab" (click)="changeValue(2)" [class.btnActive]="value == 2">
            <i class="fas fa-list me-1"></i>
            Multiple choice
            <span class="badge bg-secondary ms-1" *ngIf="multipleChoiceQuestions.length > 0">{{multipleChoiceQuestions.length}}</span>
          </button>
        </div>
        <div class="action d-flex gap-2">
          <button class="btn btn-success m-0" (click)="addQuestion()">+ Add Question</button>
          <button class="btn btn-primary m-0" (click)="saveQuestions()">
            <i class="fas fa-save me-1"></i>Save Questions
          </button>
        </div>
      </div>

    </div>


          <div class="questions mt-3">
        <ng-container *ngIf="value == 0">
          <div *ngIf="trueFalseQuestions.length === 0" class="no-questions text-center py-4">
            <i class="fas fa-question-circle fa-3x text-muted mb-3"></i>
            <h5 class="text-muted">No True/False questions yet</h5>
            <p class="text-muted">Click "Add Question" to create your first True/False question.</p>
          </div>
          <div *ngFor="let question of trueFalseQuestions.controls; let i = index" class="question-wrapper mb-3">
            <app-true-false
              [formGroup]="$any(question)"
              [questionIndex]="i"
              (removeQuestion)="removeTrueFalseQuestion(i)">
            </app-true-false>
          </div>
        </ng-container>

        <ng-container *ngIf="value == 1">
          <div *ngIf="shortAnswerQuestions.length === 0" class="no-questions text-center py-4">
            <i class="fas fa-edit fa-3x text-muted mb-3"></i>
            <h5 class="text-muted">No Short Answer questions yet</h5>
            <p class="text-muted">Click "Add Question" to create your first Short Answer question.</p>
          </div>
          <div *ngFor="let question of shortAnswerQuestions.controls; let i = index" class="question-wrapper mb-3">
            <app-short-answer
              [formGroup]="$any(question)"
              [questionIndex]="i"
              (removeQuestion)="removeShortAnswerQuestion(i)">
            </app-short-answer>
          </div>
        </ng-container>

        <ng-container *ngIf="value == 2">
          <div *ngIf="multipleChoiceQuestions.length === 0" class="no-questions text-center py-4">
            <i class="fas fa-list fa-3x text-muted mb-3"></i>
            <h5 class="text-muted">No Multiple Choice questions yet</h5>
            <p class="text-muted">Click "Add Question" to create your first Multiple Choice question.</p>
          </div>
          <div *ngFor="let question of multipleChoiceQuestions.controls; let i = index" class="question-wrapper mb-3">
            <app-multiple-choice
              [formGroup]="$any(question)"
              [questionIndex]="i"
              (removeQuestion)="removeMultipleChoiceQuestion(i)">
            </app-multiple-choice>
          </div>
        </ng-container>
      </div>
  </div>
</div>